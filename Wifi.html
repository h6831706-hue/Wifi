<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi Network Controller - Secure Permanent Access</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
        }

        h1 {
            color: #1a2a6c;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            color: #666;
            font-size: 1.2rem;
        }

        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            color: #333;
        }

        .nav-tab.active {
            background: #4facfe;
            color: white;
        }

        .nav-tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .dashboard {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .devices-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #1a2a6c;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .wifi-status {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 4px solid #4facfe;
        }

        .wifi-status.connected {
            border-left-color: #43e97b;
            background: #f0fff4;
        }

        .wifi-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .wifi-detail {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detail-label {
            font-weight: 600;
            color: #666;
            font-size: 0.9rem;
        }

        .detail-value {
            font-size: 1rem;
            font-weight: 500;
        }

        .wifi-name {
            font-size: 1.3rem;
            font-weight: bold;
            color: #1a2a6c;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .security-badge {
            background: #43e97b;
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .security-badge.warning {
            background: #f5576c;
        }

        .control-section {
            margin-bottom: 30px;
        }

        .control-section-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #1a2a6c;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .control-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #4facfe;
        }

        .control-item.permanent {
            border-left-color: #43e97b;
            background: #f0fff4;
        }

        .control-item.blocked {
            border-left-color: #f5576c;
            background: #ffeaea;
        }

        .control-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .app-icon {
            width: 24px;
            height: 24px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        .app-youtube { background: #FF0000; }
        .app-facebook { background: #1877F2; }
        .app-whatsapp { background: #25D366; }
        .app-instagram { background: #E4405F; }
        .app-netflix { background: #E50914; }

        .website-item {
            border-left-color: #ff9a3c;
        }

        .control-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .btn-sm {
            padding: 4px 8px;
            font-size: 0.8rem;
        }

        .btn-primary {
            background: #4facfe;
            color: white;
        }

        .btn-danger {
            background: #f5576c;
            color: white;
        }

        .btn-success {
            background: #43e97b;
            color: white;
        }

        .btn-warning {
            background: #f093fb;
            color: white;
        }

        .btn-info {
            background: #a8edea;
            color: #333;
        }

        .btn-permanent {
            background: #38f9d7;
            color: #333;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }

        .device-list {
            max-height: 700px;
            overflow-y: auto;
        }

        .device-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #4facfe;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .device-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .device-card.blocked {
            border-left-color: #f5576c;
            opacity: 0.7;
        }

        .device-card.permanent {
            border-left-color: #43e97b;
            background: #f8fff9;
        }

        .device-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .device-name {
            font-weight: bold;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .device-actions {
            display: flex;
            gap: 10px;
        }

        .device-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-group {
            margin-bottom: 10px;
        }

        .platform-icon {
            font-size: 1.2rem;
        }

        .connected-time {
            background: #e9f7fe;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .permanent-badge {
            background: #43e97b;
            color: white;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .restrictions-section {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .restrictions-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #1a2a6c;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .restrictions-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .restriction-tag {
            background: #ffeaea;
            color: #f5576c;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .restriction-tag.website {
            background: #fff3e0;
            color: #ff9800;
        }

        .restriction-tag.permanent {
            background: #e8f5e9;
            color: #43e97b;
        }

        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-card.warning {
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .stat-card.success {
            background: linear-gradient(135deg, #43e97b, #38f9d7);
        }

        .stat-card.info {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            color: #333;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .permanent-page {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .permanent-devices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .permanent-device-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #43e97b;
        }

        .security-notice {
            background: #fff3e0;
            border: 1px solid #ffb74d;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .security-notice i {
            color: #ff9800;
            font-size: 1.2rem;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #43e97b;
            color: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #1a2a6c;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            border-color: #4facfe;
            outline: none;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px;
        }

        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .device-details {
                grid-template-columns: 1fr;
            }
            
            .wifi-info {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .device-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .device-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .btn {
                flex: 1;
                justify-content: center;
            }
            
            .permanent-devices-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-wifi"></i> WiFi Network Controller</h1>
            <p class="subtitle">Secure Permanent Device Access Management</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="nav-tab" onclick="showTab('permanentPage')">
                <i class="fas fa-key"></i> Permanent Devices
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard">
                <div class="control-panel">
                    <h2 class="panel-title">Network Status</h2>
                    
                    <div class="wifi-status connected">
                        <div class="wifi-name">
                            <i class="fas fa-wifi"></i>
                            HomeNetwork_5G
                            <div class="security-badge">
                                <i class="fas fa-shield-alt"></i> WPA2 Secure
                            </div>
                        </div>
                        <div class="wifi-info">
                            <div class="wifi-detail">
                                <div class="detail-label">Status</div>
                                <div class="detail-value" style="color: #43e97b;">Connected</div>
                            </div>
                            <div class="wifi-detail">
                                <div class="detail-label">Signal Strength</div>
                                <div class="detail-value">Excellent</div>
                            </div>
                            <div class="wifi-detail">
                                <div class="detail-label">Frequency</div>
                                <div class="detail-value">5 GHz</div>
                            </div>
                            <div class="wifi-detail">
                                <div class="detail-label">Permanent Devices</div>
                                <div class="detail-value" id="permanentDevicesCount">2</div>
                            </div>
                        </div>
                    </div>

                    <div class="security-notice">
                        <i class="fas fa-exclamation-triangle"></i>
                        <div>
                            <strong>Security Notice:</strong> Permanent device access does not store or share your WiFi password. 
                            It uses MAC address filtering for secure connection without compromising password security.
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h3 class="control-section-title">
                            <i class="fas fa-user-check"></i> Permanent Devices
                        </h3>
                        <div class="control-list" id="permanentDevices">
                            <!-- Permanent devices will be populated by JavaScript -->
                        </div>
                        <button class="btn btn-permanent" style="margin-top: 10px; width: 100%;" onclick="showAddPermanentModal()">
                            <i class="fas fa-plus"></i> Add Permanent Device
                        </button>
                    </div>

                    <div class="control-section">
                        <h3 class="control-section-title">
                            <i class="fas fa-globe"></i> Website Controls
                        </h3>
                        <div class="control-list" id="websiteControls">
                            <!-- Website controls will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="quick-actions">
                        <button class="btn btn-success" onclick="enableAllAccess()">
                            <i class="fas fa-unlock"></i> Enable All Access
                        </button>
                        <button class="btn btn-danger" onclick="blockAllEntertainment()">
                            <i class="fas fa-ban"></i> Block Entertainment
                        </button>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalDevices">3</div>
                            <div class="stat-label">Total Devices</div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-number" id="permanentCount">2</div>
                            <div class="stat-label">Permanent Devices</div>
                        </div>
                    </div>
                </div>

                <div class="devices-panel">
                    <h2 class="panel-title">
                        Connected Devices
                        <button class="btn btn-primary" id="refreshBtn">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </h2>
                    <div class="device-list" id="deviceList">
                        <!-- Devices will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Permanent Devices Tab -->
        <div id="permanentPage" class="tab-content">
            <div class="permanent-page">
                <h2 class="panel-title">
                    Permanent Device Access
                    <button class="btn btn-permanent" onclick="showAddPermanentModal()">
                        <i class="fas fa-plus"></i> Add Permanent Device
                    </button>
                </h2>
                
                <div class="security-notice">
                    <i class="fas fa-shield-alt"></i>
                    <div>
                        <strong>Secure Permanent Access:</strong> Devices are granted permanent access through MAC address filtering. 
                        Your WiFi password remains secure and is not stored or shared. Only trusted devices should be added.
                    </div>
                </div>

                <div class="permanent-devices-grid" id="permanentDevicesGrid">
                    <!-- Permanent devices will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Add Permanent Device Modal -->
    <div class="modal" id="addPermanentModal">
        <div class="modal-content">
            <h2 class="modal-title">Add Permanent Device</h2>
            
            <div class="security-notice" style="margin-bottom: 20px;">
                <i class="fas fa-info-circle"></i>
                <div>
                    This will allow the selected device to connect to <strong>HomeNetwork_5G</strong> without needing to enter the password.
                    The device will be identified by its MAC address for secure access.
                </div>
            </div>
            
            <div class="form-group">
                <label for="permanentDevice">Select Device to Make Permanent</label>
                <select id="permanentDevice">
                    <!-- Devices will be populated by JavaScript -->
                </select>
            </div>
            
            <div class="form-group">
                <label for="permanentDescription">Description (Optional)</label>
                <textarea id="permanentDescription" rows="2" placeholder="e.g., My personal phone, Trusted tablet..."></textarea>
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="securityAcknowledged">
                    I understand this device will have permanent access to my WiFi network
                </label>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-permanent" onclick="addPermanentDevice()">
                    <i class="fas fa-check-circle"></i> Grant Permanent Access
                </button>
                <button class="btn" onclick="hideModal('addPermanentModal')">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Sample data
        const currentWifi = {
            name: "HomeNetwork_5G",
            security: "WPA2",
            status: "connected",
            signal: "Excellent",
            frequency: "5 GHz"
        };

        const devices = [
            {
                id: 1,
                name: "John's iPhone",
                ip: "192.168.1.101",
                mac: "AA:BB:CC:DD:EE:FF",
                platform: "iOS",
                platformIcon: "fab fa-apple",
                status: "online",
                connectedSince: "2 hours ago",
                dataUsage: "1.2 GB",
                isBlocked: false,
                isPermanent: true,
                permanentSince: "2023-01-15",
                description: "Personal phone"
            },
            {
                id: 2,
                name: "Samsung Galaxy S21",
                ip: "192.168.1.102",
                mac: "11:22:33:44:55:66",
                platform: "Android",
                platformIcon: "fab fa-android",
                status: "online",
                connectedSince: "45 minutes ago",
                dataUsage: "450 MB",
                isBlocked: false,
                isPermanent: false,
                permanentSince: null,
                description: ""
            },
            {
                id: 3,
                name: "Living Room TV",
                ip: "192.168.1.103",
                mac: "FF:EE:DD:CC:BB:AA",
                platform: "Smart TV",
                platformIcon: "fas fa-tv",
                status: "online",
                connectedSince: "5 hours ago",
                dataUsage: "3.1 GB",
                isBlocked: false,
                isPermanent: true,
                permanentSince: "2023-03-10",
                description: "Smart TV in living room"
            }
        ];

        // Website controls
        const websiteControls = [
            { id: 1, url: "facebook.com", category: "social", blocked: true, icon: "fab fa-facebook", color: "app-facebook" },
            { id: 2, url: "youtube.com", category: "entertainment", blocked: true, icon: "fab fa-youtube", color: "app-youtube" },
            { id: 3, url: "instagram.com", category: "social", blocked: true, icon: "fab fa-instagram", color: "app-instagram" }
        ];

        // Permanent devices list
        const permanentDevices = devices.filter(device => device.isPermanent);

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            renderDevices();
            renderPermanentDevices();
            renderWebsiteControls();
            renderPermanentPage();
            setupEventListeners();
            updateStats();
        });

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function renderDevices() {
            const deviceList = document.getElementById('deviceList');
            deviceList.innerHTML = '';

            devices.forEach(device => {
                const deviceCard = document.createElement('div');
                deviceCard.className = `device-card ${device.isBlocked ? 'blocked' : ''} ${device.isPermanent ? 'permanent' : ''}`;
                
                deviceCard.innerHTML = `
                    <div class="device-header">
                        <div class="device-name">
                            <i class="${device.platformIcon} platform-icon"></i>
                            ${device.name}
                            ${device.isBlocked ? '<span style="color: #f5576c; font-size: 0.8rem;"> (BLOCKED)</span>' : ''}
                            ${device.isPermanent ? '<div class="permanent-badge"><i class="fas fa-key"></i> PERMANENT</div>' : ''}
                            <span class="connected-time"><i class="far fa-clock"></i> ${device.connectedSince}</span>
                        </div>
                        <div class="device-actions">
                            ${device.isBlocked ? 
                                `<button class="btn btn-success" onclick="unblockDevice(${device.id})">
                                    <i class="fas fa-unlock"></i> Unblock
                                </button>` : 
                                `<button class="btn btn-danger" onclick="blockDevice(${device.id})">
                                    <i class="fas fa-ban"></i> Block
                                </button>`
                            }
                            ${device.isPermanent ? 
                                `<button class="btn btn-warning" onclick="removePermanentAccess(${device.id})">
                                    <i class="fas fa-key"></i> Remove Permanent
                                </button>` :
                                `<button class="btn btn-permanent" onclick="makePermanent(${device.id})">
                                    <i class="fas fa-key"></i> Make Permanent
                                </button>`
                            }
                        </div>
                    </div>
                    <div class="device-details">
                        <div class="detail-group">
                            <div class="detail-label">IP Address</div>
                            <div class="detail-value">${device.ip}</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">MAC Address</div>
                            <div class="detail-value">${device.mac}</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Data Usage</div>
                            <div class="detail-value">${device.dataUsage}</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Status</div>
                            <div class="detail-value" style="color: ${device.status === 'online' ? '#43e97b' : '#f5576c'}">
                                ${device.status === 'online' ? 'Online' : 'Offline'}
                            </div>
                        </div>
                    </div>
                    ${device.isPermanent ? `
                    <div class="restrictions-section">
                        <div class="restrictions-title">
                            <i class="fas fa-key"></i> Permanent Access
                        </div>
                        <div class="restrictions-list">
                            <div class="restriction-tag permanent">
                                <i class="fas fa-wifi"></i> No Password Required
                            </div>
                            <div class="restriction-tag permanent">
                                <i class="far fa-calendar"></i> Since ${device.permanentSince}
                            </div>
                            ${device.description ? `
                            <div class="restriction-tag permanent">
                                <i class="fas fa-info-circle"></i> ${device.description}
                            </div>
                            ` : ''}
                        </div>
                    </div>
                    ` : ''}
                `;
                
                deviceList.appendChild(deviceCard);
            });
        }

        function renderPermanentDevices() {
            const permanentDevicesList = document.getElementById('permanentDevices');
            permanentDevicesList.innerHTML = '';

            permanentDevices.forEach(device => {
                const controlItem = document.createElement('div');
                controlItem.className = `control-item permanent`;
                
                controlItem.innerHTML = `
                    <div class="control-info">
                        <div class="app-icon" style="background: #43e97b;">
                            <i class="fas fa-key"></i>
                        </div>
                        <div>
                            <div style="font-weight: bold;">${device.name}</div>
                            <div style="font-size: 0.8rem; color: #666;">${device.platform} • ${device.mac}</div>
                        </div>
                    </div>
                    <div class="control-actions">
                        <button class="btn btn-danger btn-sm" onclick="removePermanentAccess(${device.id})">
                            <i class="fas fa-times"></i> Remove
                        </button>
                    </div>
                `;
                
                permanentDevicesList.appendChild(controlItem);
            });

            // Update permanent devices count
            document.getElementById('permanentDevicesCount').textContent = permanentDevices.length;
            document.getElementById('permanentCount').textContent = permanentDevices.length;
            document.getElementById('totalDevices').textContent = devices.length;
        }

        function renderPermanentPage() {
            const permanentDevicesGrid = document.getElementById('permanentDevicesGrid');
            permanentDevicesGrid.innerHTML = '';

            if (permanentDevices.length === 0) {
                permanentDevicesGrid.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-key" style="font-size: 3rem; margin-bottom: 20px; color: #ddd;"></i>
                        <h3>No Permanent Devices</h3>
                        <p>No devices have been granted permanent access to your WiFi network.</p>
                        <button class="btn btn-permanent" onclick="showAddPermanentModal()" style="margin-top: 15px;">
                            <i class="fas fa-plus"></i> Add Your First Permanent Device
                        </button>
                    </div>
                `;
                return;
            }

            permanentDevices.forEach(device => {
                const deviceCard = document.createElement('div');
                deviceCard.className = 'permanent-device-card';
                
                deviceCard.innerHTML = `
                    <div class="device-header">
                        <div class="device-name">
                            <i class="${device.platformIcon} platform-icon"></i>
                            ${device.name}
                            <div class="permanent-badge"><i class="fas fa-key"></i> PERMANENT ACCESS</div>
                        </div>
                    </div>
                    <div class="device-details">
                        <div class="detail-group">
                            <div class="detail-label">MAC Address</div>
                            <div class="detail-value">${device.mac}</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">IP Address</div>
                            <div class="detail-value">${device.ip}</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Permanent Since</div>
                            <div class="detail-value">${device.permanentSince}</div>
                        </div>
                        <div class="detail-group">
                            <div class="detail-label">Status</div>
                            <div class="detail-value" style="color: ${device.status === 'online' ? '#43e97b' : '#f5576c'}">
                                ${device.status === 'online' ? 'Online' : 'Offline'}
                            </div>
                        </div>
                    </div>
                    ${device.description ? `
                    <div class="restrictions-section">
                        <div class="restrictions-title">
                            <i class="fas fa-info-circle"></i> Description
                        </div>
                        <div class="restrictions-list">
                            <div class="restriction-tag permanent">
                                ${device.description}
                            </div>
                        </div>
                    </div>
                    ` : ''}
                    <div class="restrictions-section">
                        <div class="restrictions-title">
                            <i class="fas fa-shield-alt"></i> Security Features
                        </div>
                        <div class="restrictions-list">
                            <div class="restriction-tag permanent">
                                <i class="fas fa-fingerprint"></i> MAC Address Authentication
                            </div>
                            <div class="restriction-tag permanent">
                                <i class="fas fa-wifi"></i> No Password Storage
                            </div>
                            <div class="restriction-tag permanent">
                                <i class="fas fa-memory"></i> Auto-Reconnect Enabled
                            </div>
                        </div>
                    </div>
                    <div class="device-actions" style="margin-top: 15px;">
                        <button class="btn btn-danger" onclick="removePermanentAccess(${device.id})">
                            <i class="fas fa-times"></i> Remove Permanent Access
                        </button>
                    </div>
                `;
                
                permanentDevicesGrid.appendChild(deviceCard);
            });
        }

        function renderWebsiteControls() {
            const websiteControlsList = document.getElementById('websiteControls');
            websiteControlsList.innerHTML = '';

            websiteControls.forEach(control => {
                const controlItem = document.createElement('div');
                controlItem.className = `control-item website-item ${control.blocked ? 'blocked' : ''}`;
                
                controlItem.innerHTML = `
                    <div class="control-info">
                        <div class="app-icon ${control.color}">
                            <i class="${control.icon}"></i>
                        </div>
                        <div>
                            <div style="font-weight: bold;">${control.url}</div>
                            <div style="font-size: 0.8rem; color: #666;">${control.category}</div>
                        </div>
                    </div>
                    <div class="control-actions">
                        ${control.blocked ? 
                            `<button class="btn btn-success btn-sm" onclick="toggleWebsiteControl(${control.id}, false)">
                                <i class="fas fa-check"></i> Allow
                            </button>` : 
                            `<button class="btn btn-danger btn-sm" onclick="toggleWebsiteControl(${control.id}, true)">
                                <i class="fas fa-ban"></i> Block
                            </button>`
                        }
                    </div>
                `;
                
                websiteControlsList.appendChild(controlItem);
            });
        }

        function updateStats() {
            // Stats are updated in renderPermanentDevices
        }

        function setupEventListeners() {
            document.getElementById('refreshBtn').addEventListener('click', function() {
                showNotification('Device list refreshed successfully');
            });
        }

        function showAddPermanentModal() {
            const permanentDeviceSelect = document.getElementById('permanentDevice');
            permanentDeviceSelect.innerHTML = '';
            
            // Only show non-permanent devices
            const nonPermanentDevices = devices.filter(device => !device.isPermanent);
            
            if (nonPermanentDevices.length === 0) {
                showNotification('All devices already have permanent access', 'warning');
                return;
            }
            
            nonPermanentDevices.forEach(device => {
                const option = document.createElement('option');
                option.value = device.id;
                option.textContent = `${device.name} (${device.platform} - ${device.mac})`;
                permanentDeviceSelect.appendChild(option);
            });
            
            document.getElementById('permanentDescription').value = '';
            document.getElementById('securityAcknowledged').checked = false;
            showModal('addPermanentModal');
        }

        function addPermanentDevice() {
            const deviceId = parseInt(document.getElementById('permanentDevice').value);
            const description = document.getElementById('permanentDescription').value;
            const securityAcknowledged = document.getElementById('securityAcknowledged').checked;
            
            if (!securityAcknowledged) {
                showNotification('Please acknowledge the security implications', 'warning');
                return;
            }
            
            const device = devices.find(d => d.id === deviceId);
            if (device) {
                device.isPermanent = true;
                device.permanentSince = new Date().toISOString().split('T')[0];
                device.description = description;
                
                // Update permanent devices list
                permanentDevices.push(device);
                
                renderDevices();
                renderPermanentDevices();
                renderPermanentPage();
                hideModal('addPermanentModal');
                showNotification(`Device "${device.name}" now has permanent WiFi access`);
            }
        }

        function makePermanent(deviceId) {
            const device = devices.find(d => d.id === deviceId);
            if (device) {
                device.isPermanent = true;
                device.permanentSince = new Date().toISOString().split('T')[0];
                
                // Update permanent devices list
                permanentDevices.push(device);
                
                renderDevices();
                renderPermanentDevices();
                renderPermanentPage();
                showNotification(`Device "${device.name}" now has permanent WiFi access`);
            }
        }

        function removePermanentAccess(deviceId) {
            const device = devices.find(d => d.id === deviceId);
            if (device) {
                device.isPermanent = false;
                device.permanentSince = null;
                
                // Remove from permanent devices list
                const index = permanentDevices.findIndex(d => d.id === deviceId);
                if (index !== -1) {
                    permanentDevices.splice(index, 1);
                }
                
                renderDevices();
                renderPermanentDevices();
                renderPermanentPage();
                showNotification(`Permanent access removed from "${device.name}"`);
            }
        }

        function toggleWebsiteControl(controlId, block) {
            const control = websiteControls.find(c => c.id === controlId);
            if (control) {
                control.blocked = block;
                renderWebsiteControls();
                showNotification(`Website ${control.url} ${block ? 'blocked' : 'allowed'}`);
            }
        }

        function blockDevice(deviceId) {
            const device = devices.find(d => d.id === deviceId);
            if (device) {
                device.isBlocked = true;
                renderDevices();
                showNotification(`Device "${device.name}" has been blocked`);
            }
        }

        function unblockDevice(deviceId) {
            const device = devices.find(d => d.id === deviceId);
            if (device) {
                device.isBlocked = false;
                renderDevices();
                showNotification(`Device "${device.name}" has been unblocked`);
            }
        }

        function enableAllAccess() {
            websiteControls.forEach(control => control.blocked = false);
            devices.forEach(device => {
                device.isBlocked = false;
            });
            
            renderWebsiteControls();
            renderDevices();
            showNotification('All access enabled for all devices');
        }

        function blockAllEntertainment() {
            websiteControls.forEach(control => {
                if (control.category === 'entertainment') {
                    control.blocked = true;
                }
            });
            
            renderWebsiteControls();
            showNotification('All entertainment content blocked');
        }

        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function hideModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = type === 'success' ? '#43e97b' : 
                                          type === 'danger' ? '#e74c3c' : 
                                          type === 'warning' ? '#f39c12' : '#3498db';
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>